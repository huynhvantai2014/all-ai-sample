# 画面定義書：仮販売作成画面 (SRC0002)

---

## 1. Thông tin chung

- Tên màn hình: Tạo đơn hàng tạm thời (仮販売作成)
- Mã màn hình: SRC0002
- Tên vật lý: provisional_order_screen


# 画面定義書（IPA標準）

画面名 (Tên màn hình): 仮販売作成画面
画面ID (Mã màn hình): SRC0002
画面物理名 (Tên vật lý màn hình): provisional_order_screen

## 権限定義 (Phân quyền)

| 画面物理名                | Quản trị | Nhân viên | Khách | Dev/Test |
|---------------------------|---------|-----------|-------|----------|
| provisional_order_screen  | ○       | ○         |       | ○        |

## 項目定義 (Định nghĩa item)

| 論理名           | 物理名         | 項目タイプ   | 説明                                 | IN/OUT | 必須 | 桁数 | 正規表現 | 初期値 | 制御内容 | 備考 |
|------------------|----------------|-------------|--------------------------------------|--------|------|------|--------|--------|--------|------|
| Mã đơn tạm thời  | order_no       | text        | Mã đơn hàng tạm thời                 | OUT    | ○    |      |        |        |        |      |
| Sản phẩm         | product        | text        | Tên/mã sản phẩm                      | IN     | ○    |      |        |        |        |      |
| Barcode/JAN/SKU  | barcode        | text        | Barcode/JAN/SKU sản phẩm             | IN     | ○    |      |        |        |        |      |
| Số lượng         | quantity       | number      | Số lượng sản phẩm                    | IN     | ○    |      |        | 1      |        |      |
| Giá              | price          | number      | Giá sản phẩm                         | IN     | ○    |      |        |        |        |      |
| Chiết khấu       | discount       | text        | Mã giảm giá, khuyến mãi               | IN     |      |      |        |        |        |      |
| Điều kiện giao hàng| delivery      | text        | Điều kiện giao hàng                  | IN     |      |      |        |        |        |      |
| Ghi chú          | note           | text        | Ghi chú đơn hàng                     | IN     |      |      |        |        |        |      |
| Khách hàng       | customer       | text        | Thông tin khách hàng (tùy chọn)      | IN     |      |      |        |        |        |      |
| Scan barcode     | scan_btn       | button      | Nút quét barcode                     | IN     |      |      |        |        |        |      |
| Tạo đơn hàng     | create_btn     | button      | Nút tạo đơn hàng tạm thời             | IN     | ○    |      |        |        |        |      |
| Thông báo lỗi    | error_msg      | label       | Hiển thị lỗi nhập liệu                | OUT    |      |      |        |        |        |      |

## イベント定義 (Event Definition)

### scan_btn onClick

- Quét barcode, tự động điền thông tin sản phẩm

### create_btn onClick

- Tạo đơn hàng tạm thời, gọi API xử lý

### quantity onChange

- Cập nhật số lượng, tính lại tổng tiền

### discount onBlur

- Áp dụng mã giảm giá, khuyến mãi

### delivery onBlur

- Kiểm tra điều kiện giao hàng

### note onBlur

- Kiểm tra ghi chú

## 画面遷移 (Screen Transition)

| 遷移元画面ID | 遷移元画面名         | 遷移先画面ID | 遷移先画面名         | 条件・イベント         | 備考 |
|--------------|----------------------|--------------|----------------------|-----------------------|------|
| SRC0002      | 仮販売作成画面       | SRC0003      | 仮販売一覧画面       | Tạo mới thành công    |      |
| SRC0002      | 仮販売作成画面       | SRC0002      | 仮販売作成画面       | Lưu tạm, chỉnh sửa    |      |

## アクション一覧 (Action List)

| アクション名 | 論理名      | 説明                | Điều kiện/Quyền | API名         | HTTPメソッド | 関連イベント         | 備考 |
|--------------|-------------|---------------------|----------------|---------------|-------------|---------------------|------|
| Tạo đơn hàng | create      | Tạo đơn hàng tạm thời| Nhân viên      | /api/provisional-order| POST | create_btn onClick |      |
| Quét barcode | scan        | Quét barcode sản phẩm| Nhân viên      | /api/provisional-order/scan| POST | scan_btn onClick |      |
| Sửa đơn hàng | edit        | Sửa đơn hàng tạm thời| Nhân viên      | /api/provisional-order/:id| PUT | create_btn onClick |      |
| Xóa đơn hàng | delete      | Xóa đơn hàng tạm thời| Quản trị       | /api/provisional-order/:id| DELETE | create_btn onClick |      |

## Mock/Đối chiếu

- Mock HTML/CSS đã có đầy đủ form nhập barcode, số lượng, giá, chiết khấu, điều kiện giao hàng, ghi chú, nút quét, nút tạo đơn hàng, layout hiện đại, màu sắc, font đồng nhất.

## Message/Error

- Hiển thị thông báo lỗi khi nhập thiếu thông tin, sản phẩm không tồn kho, lỗi hệ thống
- Sử dụng message từ docs/templates/メッセージ一覧_Template.md

## Ghi chú

- Nếu bổ sung chức năng mới (ví dụ: nhập thông tin khách hàng bắt buộc), cần cập nhật lại định nghĩa màn hình và API
- Nếu có điểm chưa rõ, ghi chú "Cần xác nhận" hoặc "レイアウト情報不足"
