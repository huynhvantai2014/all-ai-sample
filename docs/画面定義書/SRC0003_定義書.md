# 画面定義書（IPA標準）

画面名 (Tên màn hình): 仮販売一覧画面
画面ID (Mã màn hình): SRC0003
画面物理名 (Tên vật lý màn hình): provisional_order_list

## 権限定義 (Phân quyền)

| 画面物理名           | Quản trị | Nhân viên | Khách | Dev/Test |
|----------------------|---------|-----------|-------|----------|
| provisional_order_list| ○       | ○         |       | ○        |

## 項目定義 (Định nghĩa item)

| 論理名           | 物理名         | 項目タイプ   | 説明                                 | IN/OUT | 必須 | 桁数 | 正規表現 | 初期値 | 制御内容 | 備考 |
|------------------|----------------|-------------|--------------------------------------|--------|------|------|--------|--------|--------|------|
| 仮販売番号       | order_no       | text        | Mã đơn hàng tạm thời                 | OUT    | ○    |      |        |        |        |      |
| 担当者           | staff          | text        | Tên nhân viên phụ trách              | OUT    | ○    |      |        |        |        |      |
| 日時             | datetime       | datetime    | Thời gian tạo đơn                    | OUT    | ○    |      |        |        |        |      |
| 状態             | status         | select      | Trạng thái đơn hàng                  | OUT    | ○    |      |        |        |        |      |
| 金額             | amount         | number      | Tổng tiền                            | OUT    | ○    |      |        |        |        |      |
| 検索             | filter         | text/select | Tìm kiếm, lọc theo mã, trạng thái... | IN     |      |      |        |        |        |      |
| 詳細/編集/確定   | action_btn     | button      | Xem chi tiết, chỉnh sửa, xác nhận    | IN     |      |      |        |        |        |      |
| エクスポート     | export_btn     | button      | Xuất CSV/Excel                       | IN     |      |      |        |        |        |      |

## イベント定義 (Event Definition)

### filter onSearch

- Tìm kiếm, lọc danh sách đơn hàng

### action_btn onClick

- Hiển thị chi tiết, chỉnh sửa, xác nhận, hủy đơn

### export_btn onClick

- Xuất dữ liệu ra CSV/Excel

## 画面遷移 (Screen Transition)

| 遷移元画面ID | 遷移元画面名         | 遷移先画面ID | 遷移先画面名         | 条件・イベント         | 備考 |
|--------------|----------------------|--------------|----------------------|-----------------------|------|
| SRC0003      | 仮販売一覧画面       | SRC0002      | 仮販売作成画面       | Tạo mới đơn hàng      |      |
| SRC0003      | 仮販売一覧画面       | SRC0004      | レジ販売画面         | Xác nhận bán hàng     |      |
| SRC0003      | 仮販売一覧画面       | SRC0003      | 仮販売一覧画面       | Lọc, tìm kiếm, xuất    |      |

## アクション一覧 (Action List)

| アクション名 | 論理名      | 説明                | 条件・権限 | API名                      | HTTPメソッド | 関連イベント         | 備考 |
|--------------|-------------|---------------------|------------|---------------------------|-------------|---------------------|------|
| Tìm kiếm     | search      | Lọc, tìm kiếm đơn   | Tất cả     | /api/provisional-order    | GET         | filter onSearch     |      |
| Xem chi tiết | detail      | Xem chi tiết đơn   | Tất cả     | /api/provisional-order/:id| GET         | action_btn onClick  |      |
| Chỉnh sửa    | edit        | Sửa đơn hàng       | Quản trị    | /api/provisional-order/:id| PUT         | action_btn onClick  |      |
| Xác nhận     | confirm     | Xác nhận bán hàng  | Quản trị    | /api/provisional-order/:id/confirm| POST | action_btn onClick  |      |
| Xuất dữ liệu  | export      | Xuất CSV/Excel     | Quản trị    | /api/provisional-order/export| GET      | export_btn onClick  |      |

## Mock/Đối chiếu

- Mock HTML/CSS đã có đầy đủ bảng danh sách, filter, nút xuất, chi tiết, layout hiện đại, màu sắc, font đồng nhất.
- Không phát hiện thiếu thành phần nghiệp vụ chính.

## Message/Error

- Hiển thị thông báo lỗi khi tìm kiếm, xuất dữ liệu, xác nhận đơn hàng thất bại
- Sử dụng message từ docs/templates/メッセージ一覧_Template.md

## Ghi chú

- Nếu bổ sung chức năng mới (ví dụ: thông báo realtime), cần cập nhật lại định nghĩa màn hình và API
- Nếu có điểm chưa rõ, ghi chú "Cần xác nhận" hoặc "レイアウト情報不足"
