# 画面定義書（IPA標準）

画面名 (Tên màn hình): 売上・税レポート画面
画面ID (Mã màn hình): SRC0006
画面物理名 (Tên vật lý màn hình): sales_report_screen

## 権限定義 (Phân quyền)

| 画面物理名           | Quản trị | Nhân viên | Khách | Dev/Test |
|----------------------|---------|-----------|-------|----------|
| sales_report_screen  | ○       | ○         |       | ○        |

## 項目定義 (Định nghĩa item)

| 論理名           | 物理名         | 項目タイプ   | 説明                                 | IN/OUT | 必須 | 桁数 | 正規表現 | 初期値 | 制御内容 | 備考 |
|------------------|----------------|-------------|--------------------------------------|--------|------|------|--------|--------|--------|------|
| 日付             | date           | date        | Chọn ngày báo cáo                    | IN     | ○    |      |        |        |        |      |
| 店舗             | store          | select      | Chọn cửa hàng                        | IN     | ○    |      |        |        |        |      |
| 売上金額         | sales_amount   | number      | Tổng doanh thu                       | OUT    | ○    |      |        |        |        |      |
| 消費税           | tax            | number      | Thuế tiêu dùng                       | OUT    |      |      |        |        |        |      |
| 取引件数         | transaction_count| number    | Số lượng giao dịch                   | OUT    |      |      |        |        |        |      |
| CSV出力          | csv_export     | button      | Xuất báo cáo CSV                     | IN     |      |      |        |        |        |      |
| Excel出力        | excel_export   | button      | Xuất báo cáo Excel                   | IN     |      |      |        |        |        |      |
| レポート印刷     | report_print   | button      | In báo cáo                           | IN     |      |      |        |        |        |      |
| フィルタ         | filter         | form        | Lọc theo ngày, cửa hàng, nhân viên   | IN     |      |      |        |        |        |      |

## イベント定義 (Event Definition)

### filter onSearch

- Lọc, tìm kiếm báo cáo theo ngày, cửa hàng, nhân viên

### csv_export onClick

- Xuất báo cáo ra file CSV

### excel_export onClick

- Xuất báo cáo ra file Excel

### report_print onClick

- In báo cáo

## 画面遷移 (Screen Transition)

| 遷移元画面ID | 遷移元画面名         | 遷移先画面ID | 遷移先画面名         | 条件・イベント         | 備考 |
|--------------|----------------------|--------------|----------------------|-----------------------|------|
| SRC0006      | 売上・税レポート画面 | SRC0004      | レジ販売画面         | Quay lại bán hàng     |      |
| SRC0006      | 売上・税レポート画面 | SRC0006      | 売上・税レポート画面 | Lọc, xuất, in báo cáo |      |

## アクション一覧 (Action List)

| アクション名 | 論理名      | 説明                | 条件・権限 | API名                      | HTTPメソッド | 関連イベント         | 備考 |
|--------------|-------------|---------------------|------------|---------------------------|-------------|---------------------|------|
| Lọc báo cáo  | search      | Lọc, tìm kiếm báo cáo| Quản trị    | /api/sales-report/search  | GET         | filter onSearch     |      |
| Xuất CSV     | export_csv  | Xuất báo cáo CSV     | Quản trị    | /api/sales-report/export-csv| GET      | csv_export onClick  |      |
| Xuất Excel   | export_excel| Xuất báo cáo Excel   | Quản trị    | /api/sales-report/export-excel| GET    | excel_export onClick|      |
| In báo cáo   | print_report| In báo cáo           | Quản trị    | /api/sales-report/print   | GET         | report_print onClick|      |

## Mock/Đối chiếu

- Mock HTML/CSS đã có đầy đủ form lọc, bảng báo cáo, nút xuất CSV/Excel, in báo cáo, layout hiện đại, màu sắc, font đồng nhất.
- Không phát hiện thiếu thành phần nghiệp vụ chính.

## Message/Error

- Hiển thị thông báo lỗi khi lọc, xuất, in báo cáo thất bại
- Sử dụng message từ docs/templates/メッセージ一覧_Template.md

## Ghi chú

- Nếu bổ sung chức năng mới (ví dụ: gửi báo cáo tự động), cần cập nhật lại định nghĩa màn hình và API
- Nếu có điểm chưa rõ, ghi chú "Cần xác nhận" hoặc "レイアウト情報不足"
