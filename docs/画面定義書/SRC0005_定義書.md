# 画面定義書（IPA標準）

画面名 (Tên màn hình): 決済選択画面
画面ID (Mã màn hình): SRC0005
画面物理名 (Tên vật lý màn hình): payment_method_screen

## 権限定義 (Phân quyền)

| 画面物理名           | Quản trị | Nhân viên | Khách | Dev/Test |
|----------------------|---------|-----------|-------|----------|
| payment_method_screen| ○       | ○         |       | ○        |

## 項目定義 (Định nghĩa item)

| 論理名           | 物理名         | 項目タイプ   | 説明                                 | IN/OUT | 必須 | 桁数 | 正規表現 | 初期値 | 制御内容 | 備考 |
|------------------|----------------|-------------|--------------------------------------|--------|------|------|--------|--------|--------|------|
| 決済方法         | payment_method | button      | Chọn phương thức thanh toán           | IN     | ○    |      |        |        |        |      |
| 合計金額         | total_amount   | text        | Tổng tiền                             | OUT    | ○    |      |        |        | readonly|      |
| 消費税           | tax            | text        | Thuế tiêu dùng                        | OUT    |      |      |        |        | readonly|      |
| 確定             | confirm_btn    | button      | Xác nhận thanh toán                   | IN     | ○    |      |        |        |        |      |
| 契約書印刷       | contract_print | button      | In hợp đồng khi chia nhỏ thanh toán    | IN     |      |      |        |        |        |      |
| 取引ID           | transaction_id | text        | Mã giao dịch                          | OUT    |      |      |        |        |        |      |

## イベント定義 (Event Definition)

### payment_method onClick

- Chọn phương thức thanh toán (tiền mặt, thẻ, IC, QR, chia nhỏ)

### confirm_btn onClick

- Xác nhận thanh toán, gọi API xử lý

### contract_print onClick

- In hợp đồng khi chia nhỏ thanh toán

## 画面遷移 (Screen Transition)

| 遷移元画面ID | 遷移元画面名         | 遷移先画面ID | 遷移先画面名         | 条件・イベント         | 備考 |
|--------------|----------------------|--------------|----------------------|-----------------------|------|
| SRC0005      | 決済選択画面         | SRC0004      | レジ販売画面         | Quay lại bán hàng     |      |
| SRC0005      | 決済選択画面         | SRC0005      | 決済選択画面         | Chọn phương thức, xác nhận|      |

## アクション一覧 (Action List)

| アクション名 | 論理名      | 説明                | 条件・権限 | API名                      | HTTPメソッド | 関連イベント         | 備考 |
|--------------|-------------|---------------------|------------|---------------------------|-------------|---------------------|------|
| Chọn phương thức| select_method| Chọn phương thức thanh toán| Nhân viên  | /api/payment/select-method| POST        | payment_method onClick|      |
| Xác nhận thanh toán| confirm   | Xác nhận, xử lý thanh toán | Nhân viên  | /api/payment/confirm      | POST        | confirm_btn onClick   |      |
| In hợp đồng   | print_contract| In hợp đồng chia nhỏ thanh toán| Nhân viên| /api/payment/print-contract| GET        | contract_print onClick|      |

## Mock/Đối chiếu

- Mock HTML/CSS đã có đầy đủ nút chọn phương thức, tổng tiền, thuế, nút xác nhận, in hợp đồng, layout hiện đại, màu sắc, font đồng nhất.
- Không phát hiện thiếu thành phần nghiệp vụ chính.

## Message/Error

- Hiển thị thông báo lỗi khi chọn phương thức, xác nhận thanh toán, in hợp đồng thất bại
- Sử dụng message từ docs/templates/メッセージ一覧_Template.md

## Ghi chú

- Nếu bổ sung chức năng mới (ví dụ: thêm phương thức thanh toán mới), cần cập nhật lại định nghĩa màn hình và API
- Nếu có điểm chưa rõ, ghi chú "Cần xác nhận" hoặc "レイアウト情報不足"
