# ログイン画面_画面定義書

---

## 使用API一覧

### 1. ユーザー認証API

---
API ID: API_LOGIN_01
API名: ユーザー認証
エンドポイント: /api/login
メソッド: POST

## 1. 機能概要
- ユーザーID・パスワードによる認証、端末認証、監査ログ記録

## 2. パラメータ定義
| パラメータ名 | 種別 | 必須 | 型 | 桁数 | 説明 |
|--------------|------|------|----|------|------|
| userId       | body | 必須 | string | 32 | ユーザーID |
| password     | body | 必須 | string | 32 | パスワード |
| deviceId     | body | 任意 | string | 64 | 端末ID |

## 3. レスポンス定義
| フィールド名 | 型 | 桁数 | 説明 |
|--------------|----|------|------|
| token        | string | 128 | 認証トークン |
| userName     | string | 64 | ユーザー名 |
| role         | string | 16 | 権限 |
| sessionId    | string | 64 | セッションID |

## 4. エラーコード・メッセージ
| コード | メッセージ | 条件 |
|--------|------------|------|
| 401    | 認証失敗   | ユーザーIDまたはパスワード不正 |
| 403    | 端末認証失敗 | deviceId不正 |
| 500    | サーバーエラー | システム例外 |

## 5. 処理フロー
- 1. 入力バリデーション: userId, password必須・形式チェック
- 2. DB照合: usersテーブルで認証
- 3. deviceIdがあれば端末認証
- 4. 認証成功時、監査ログ記録
- 5. レスポンス生成（token, user情報）

## 6. 備考
- セッションtimeoutはconfigで設定
- 監査ログはlogin/logout時に記録

---

> ※ API定義はIPA標準テンプレートに準拠
> ※ 不足情報は「情報不足」と明記
