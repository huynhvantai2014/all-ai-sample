# 画面定義書
## ホーム画面 (Home Screen)

### 画面ID: SRC0001
### 最終更新日: 2025年10月30日

---

## 1. 画面概要

### 1.1 画面名
**ホーム画面 (Dashboard)**

### 1.2 機能概要
HR管理システムのメインダッシュボード。社員リソース状況、部門別統計情報、最新プロジェクト情報の表示。

### 1.3 画面種別
- **一覧表示画面**
- **ダッシュボード形式**

### 1.4 アクセス権限
- **管理者 (admin)**: 全機能利用可能
- **マネージャー (manager)**: 閲覧のみ
- **一般ユーザー (user)**: アクセス制限

---

## 2. 画面レイアウト

### 2.1 画面構成
```
┌─────────────────────────────────────────────────┐
│ ヘッダー: タイトル + ログアウトボタン            │
├─────────────────────────────────────────────────┤
│ ナビゲーション                                  │
│ [社員一覧] [社員登録] [ダッシュボード]           │
├─────────────────────────────────────────────────┤
│ リソース状況サマリー                            │
│ ┌─────────┬─────────┬─────────┬─────────┐     │
│ │総社員数 │稼働中   │利用可能 │稼働率   │     │
│ │  50人   │  45人   │  10人   │  80%    │     │
│ └─────────┴─────────┴─────────┴─────────┘     │
├─────────────────────────────────────────────────┤
│ 部門別リソース状況                              │
│ ┌─────────────────────────────────────────┐     │
│ │ 開発部    ■■■■■■■■■□ 90%         │     │
│ │ 営業部    ■■■■■■■□□□ 70%         │     │
│ │ 管理部    ■■■■■■□□□□ 60%         │     │
│ └─────────────────────────────────────────┘     │
├─────────────────────────────────────────────────┤
│ 進行中プロジェクト                              │
│ ┌─────────────────────────────────────────┐     │
│ │ • 新商品開発 (8名アサイン)                 │     │
│ │ • システム刷新 (5名アサイン)               │     │
│ │ • 営業支援ツール開発 (3名アサイン)         │     │
│ └─────────────────────────────────────────┘     │
└─────────────────────────────────────────────────┘
```

### 2.2 レスポンシブデザイン
- **デスクトップ**: 3カラムレイアウト
- **タブレット**: 2カラムレイアウト  
- **モバイル**: 1カラムレイアウト

---

## 3. 画面要素定義

### 3.1 ヘッダー部
| 要素名            | 種別         | 表示内容              | 動作                    |
|-------------------|--------------|----------------------|-------------------------|
| タイトル          | Text         | "HR管理システム"      | なし                    |
| ユーザー情報      | Text         | "ようこそ、{user_id}" | なし                    |
| ログアウトボタン  | Button       | "ログアウト"          | セッション終了、ログイン画面遷移 |

### 3.2 ナビゲーション部
| 要素名            | 種別         | 表示内容              | 動作                    |
|-------------------|--------------|----------------------|-------------------------|
| 社員一覧リンク    | Button/Link  | "社員一覧"            | 社員一覧画面遷移        |
| 社員登録リンク    | Button/Link  | "社員登録"            | 社員登録画面遷移        |
| ダッシュボードリンク | Button/Link | "ダッシュボード"      | 現在画面（アクティブ）  |

### 3.3 リソース状況サマリー
| 要素名            | 種別         | データソース          | 表示形式                |
|-------------------|--------------|----------------------|-------------------------|
| 総社員数          | Card         | API_RES_001          | 数値 + "人"             |
| 稼働中社員数      | Card         | API_RES_001          | 数値 + "人"             |
| 利用可能社員数    | Card         | API_RES_001          | 数値 + "人"             |
| 稼働率            | Card         | API_RES_001          | パーセント表示          |

### 3.4 部門別リソース状況
| 要素名            | 種別         | データソース          | 表示形式                |
|-------------------|--------------|----------------------|-------------------------|
| 部門名            | Text         | API_RES_001          | 文字列                  |
| 稼働率バー        | ProgressBar  | API_RES_001          | プログレスバー + %      |
| 人数情報          | Text         | API_RES_001          | "稼働中/総数"           |

### 3.5 進行中プロジェクト
| 要素名            | 種別         | データソース          | 表示形式                |
|-------------------|--------------|----------------------|-------------------------|
| プロジェクト名    | Text         | API_RES_001          | 文字列                  |
| アサイン人数      | Text         | API_RES_001          | 数値 + "名アサイン"     |

---

## 4. 画面遷移

### 4.1 遷移元画面
- ログイン画面（SRC0000）
- 社員一覧画面（SRC0002）
- 社員詳細画面（SRC0003）
- 社員編集画面（SRC0004）
- 社員登録画面（SRC0005）

### 4.2 遷移先画面
| 操作対象          | 遷移先画面          | 遷移条件              |
|-------------------|--------------------|-----------------------|
| 社員一覧リンク    | 社員一覧画面 (SRC0002) | クリック             |
| 社員登録リンク    | 社員登録画面 (SRC0005) | クリック             |
| ログアウトボタン  | ログイン画面 (SRC0000) | クリック             |

### 4.3 認証チェック
- ページアクセス時にJWTトークン検証
- 未認証の場合はログイン画面にリダイレクト

---

## 5. API連携

### 5.1 使用API
| API ID      | 呼び出しタイミング    | 用途                    |
|-------------|----------------------|-------------------------|
| API_RES_001 | 画面表示時            | リソース状況データ取得  |
| API_AUTH_002| 画面表示時            | ユーザー情報取得        |

### 5.2 API呼び出し仕様
#### API_RES_001: リソース状況取得
```typescript
// リクエスト
const response = await fetch('/api/resource/status', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
});

// レスポンスハンドリング
const data = await response.json();
if (data.success) {
  // データ更新処理
  setSummary(data.summary);
  setDepartments(data.departments);
  setProjects(data.projects);
}
```

---

## 6. データ構造

### 6.1 State管理
```typescript
interface DashboardState {
  summary: {
    total_employees: number;
    active_employees: number;
    available_employees: number;
    utilization_rate: number;
  };
  departments: Array<{
    department_name: string;
    total_count: number;
    active_count: number;
    available_count: number;
    utilization_rate: number;
  }>;
  projects: Array<{
    project_name: string;
    member_count: number;
  }>;
  isLoading: boolean;
  error: string | null;
}
```

### 6.2 初期値
```typescript
const initialState: DashboardState = {
  summary: {
    total_employees: 0,
    active_employees: 0,
    available_employees: 0,
    utilization_rate: 0
  },
  departments: [],
  projects: [],
  isLoading: true,
  error: null
};
```

---

## 7. エラーハンドリング

### 7.1 エラーパターン
| エラー種別        | 表示内容                    | 対処法                    |
|-------------------|----------------------------|---------------------------|
| API通信エラー     | "データの取得に失敗しました" | 再読み込みボタン表示      |
| 認証エラー        | "認証が切れました"          | ログイン画面リダイレクト  |
| 権限エラー        | "アクセス権限がありません"  | エラーメッセージ表示      |

### 7.2 エラー表示仕様
```typescript
{error && (
  <Alert severity="error" sx={{ mb: 2 }}>
    {error}
    <Button onClick={retry}>再試行</Button>
  </Alert>
)}
```

---

## 8. パフォーマンス仕様

### 8.1 読み込み時間
- **初期表示**: 2秒以内
- **データ更新**: 1秒以内

### 8.2 最適化
- React.memo使用によるコンポーネント再レンダリング抑制
- useCallback/useMemoによる不要な計算処理回避
- LazyLoadingによる画像読み込み最適化

### 8.3 リアルタイム更新
- 5分間隔での自動データリフレッシュ
- WebSocket接続（将来実装予定）

---

## 9. アクセシビリティ

### 9.1 WAI-ARIA対応
- 適切なaria-label属性設定
- フォーカス管理
- スクリーンリーダー対応

### 9.2 キーボード操作
- Tabキーによるフォーカス移動
- Enterキーによるボタン実行
- Escapeキーによるモーダル閉じる

---

## 10. 国際化対応

### 10.1 多言語対応
- 日本語（デフォルト）
- 英語（将来実装予定）

### 10.2 文字列リソース
```typescript
const strings = {
  title: "HR管理システム",
  welcome: "ようこそ、{user_id}",
  logout: "ログアウト",
  employees: "社員一覧",
  register: "社員登録",
  dashboard: "ダッシュボード"
};
```

---

## 11. テスト仕様

### 11.1 単体テスト
- コンポーネントレンダリングテスト
- API呼び出しテスト
- エラーハンドリングテスト

### 11.2 統合テスト
- 画面遷移テスト
- 認証フローテスト
- データ表示テスト

### 11.3 E2Eテスト
- ユーザーシナリオテスト
- ブラウザ互換性テスト
- レスポンシブデザインテスト

---

## チェックリスト
- [x] 画面レイアウト定義完了
- [x] API連携仕様明記
- [x] エラーハンドリング定義
- [x] データ構造定義
- [x] 画面遷移仕様明記
- [x] アクセシビリティ考慮
- [x] パフォーマンス要件定義
- [x] テスト仕様策定